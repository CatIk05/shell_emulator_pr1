# Эмулятор командной строки UNIX - Этап 1: REPL

## Описание

Этот проект представляет собой эмулятор командной строки UNIX-подобной ОС, реализованный на Python. На данном этапе создан минимальный прототип с базовой функциональностью REPL (Read-Eval-Print Loop).

## Реализованная функциональность

### 1. Консольный интерфейс (CLI)
- Приложение работает в форме консольного интерфейса
- Поддерживает интерактивный ввод команд

### 2. Приглашение к вводу
- Формируется на основе реальных данных ОС
- Формат: `username@hostname:directory$`
- Поддерживает отображение домашней директории как `~`
- Пример: `ivanblazhko@MacBook-Pro-VanechKa.local:~/Desktop/Учеба/КУ/pr1$`

### 3. Парсер команд
- Поддерживает раскрытие переменных окружения в форматах:
  - `$VAR` - простая переменная
  - `${VAR}` - переменная в фигурных скобках
- Поддерживает кавычки (одинарные и двойные)
- Корректно обрабатывает пробелы в аргументах

### 4. Команды-заглушки
- **ls** - выводит информацию о том, что бы было выведено
- **cd** - показывает, в какую директорию был бы выполнен переход
- **echo** - выводит переданные аргументы (с поддержкой переменных окружения)
- **exit** - завершает работу эмулятора (с поддержкой кода возврата)

### 5. Обработка ошибок
- Обработка несуществующих команд
- Обработка некорректных аргументов
- Обработка прерывания (Ctrl+C)
- Обработка EOF (Ctrl+D)

## Файлы проекта

- `shell.py` - основной файл эмулятора
- `test_stage1.py` - автоматические тесты функциональности
- `demo_stage1.py` - интерактивная демонстрация
- `README_stage1.md` - данный файл с описанием

## Запуск

### Интерактивный режим
```bash
python3 shell.py
```

### Автоматические тесты
```bash
python3 test_stage1.py
```

### Интерактивная демонстрация
```bash
python3 demo_stage1.py
```

## Примеры использования

### Базовые команды
```bash
$ ls
ls: command called with arguments: []
ls: would list contents of current directory

$ ls /home /tmp
ls: command called with arguments: ['/home', '/tmp']
ls: would list contents of: ['/home', '/tmp']

$ cd /tmp
cd: would change to directory: /tmp

$ cd
cd: would change to home directory: /Users/ivanblazhko
```

### Переменные окружения
```bash
$ echo $HOME
/Users/ivanblazhko

$ echo ${USER}
ivanblazhko

$ echo $NONEXISTENT
$NONEXISTENT
```

### Обработка ошибок
```bash
$ nonexistent_command
Command not found: nonexistent_command

$ cd /tmp /home
cd: too many arguments
Usage: cd [directory]

$ exit 42
Exiting with code: 42
```

### Кавычки и пробелы
```bash
$ echo "Hello World"
Hello World

$ ls 'file with spaces'
ls: command called with arguments: ["'file with spaces'"]
ls: would list contents of: ["'file with spaces'"]
```

## Технические детали

### Архитектура
- Класс `Shell` - основной класс эмулятора
- Словарь `commands` - регистр доступных команд
- Метод `parse_command()` - парсер команд с поддержкой переменных
- Метод `execute()` - выполнение команд с обработкой ошибок

### Парсинг переменных окружения
- Использует регулярные выражения для поиска переменных
- Поддерживает форматы `$VAR` и `${VAR}`
- Несуществующие переменные остаются в исходном виде
- Переменные в кавычках не раскрываются

### Обработка ошибок
- Try-catch блоки на всех уровнях
- Информативные сообщения об ошибках
- Корректное завершение при прерывании

## Соответствие требованиям

✅ **Приложение реализовано в форме консольного интерфейса (CLI)**  
✅ **Приглашение формируется на основе реальных данных ОС**  
✅ **Парсер поддерживает раскрытие переменных окружения**  
✅ **Реализованы команды-заглушки ls, cd**  
✅ **Реализована команда exit**  
✅ **Демонстрация работы в интерактивном режиме**  
✅ **Показаны примеры обработки ошибок**

## Следующие этапы

- **Этап 2**: Конфигурация (параметры командной строки, стартовые скрипты)
- **Этап 3**: VFS (виртуальная файловая система на основе XML)
- **Этап 4**: Основные команды (реальная логика для ls, cd, date, whoami)
- **Этап 5**: Дополнительные команды (mkdir, cp)
